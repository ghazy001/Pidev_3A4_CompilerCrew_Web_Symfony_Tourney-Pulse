{% extends 'base.html.twig' %}

    {% block title %}Tournois index{% endblock %}



    {% block body %}

            <div class="container">
                <div class="row">
                    <div class="col-xl-10 col-lg-9 offset-xl-2 offset-lg-3">

                    </div>
                </div>
            </div>

        <div class="players-grid p-96" style="margin-top: 100px; padding-left: 180px">
            <nav class="navbar upper d-lg-flex d-none">

                <div class="left-content">
                <label for="selectBox">Choose an option :</label>
                <select id="selectBox" name="selectBox">
                    <option value="{{ path('app_tournois_index', {'sortBy': 'name', 'sortOrder': 'DESC'}) }}">Tournament Name</option>
                    <option value="{{ path('app_tournois_index', {'sortBy': 'stade', 'sortOrder': 'DESC'}) }}">Stadium Name</option>
                    <option value="{{ path('app_tournois_index', {'sortBy': 'match', 'sortOrder': 'DESC'}) }}">Number Of Match</option>
                </select>
                </div>
                <div class="right-content">
                    <ul>
                        <li>
                            <form action="{{ path('app_tournois_index') }}" method="GET">
                                <input type="text" class="form-control" id="searchInput" name="query" placeholder="Search...">
                            </form>
                        </li>
                    </ul>
                </div>
            </nav>

            {% for tournoi in tournois %}
                <div class="flip-card" id="searchResults" >
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <p class="title">{{ tournoi.nomTournois }}</p>
                            <img src="{{asset('assets/images/tournament.png')}}" style="align-content: center">
                            <p>{{ tournoi.stade }}</p>
                        </div>
                        <div class="flip-card-back">
                            <p class="title nombreMatch">Number of Match: {{ tournoi.nombreMatch }}</p>
                            <p class="title dateDebut">Begining Date: {{ tournoi.dateDebut ? tournoi.dateDebut|date('Y-m-d') : '' }}</p>
                            <p class="title dateFin">End Date: {{ tournoi.dateFin ? tournoi.dateFin|date('Y-m-d') : '' }}</p>
                            <button type="submit" class="form-btn w-100 mb-32" class="btn" onclick="window.location.href='{{ path('app_tournois_show', {'idTournois': tournoi.idTournois}) }}'">Details</button>
                        </div>
                    </div>
                </div>
            {% else %}
                <tr>
                    <td colspan="7">no records found</td>
                </tr>
            {% endfor %}
        </div>

        <style>
            .flip-card {
                background-color: transparent;
                width: 200px;
                height: 300px;
                perspective: 1000px;
                font-family: sans-serif;
                display: inline-block;
                margin-right: 100px;
                margin-top: 30px;
            }

            .title {
                font-size: 1.2em;
                font-weight: 900;
                text-align: center;
                margin: 0;
            }

            .flip-card-inner {
                position: relative;
                width: 100%;
                height: 100%;
                text-align: center;
                transition: transform 0.8s;
                transform-style: preserve-3d;
            }

            .flip-card:hover .flip-card-inner {
                transform: rotateY(180deg);
            }

            .flip-card-front, .flip-card-back {
                box-shadow: 0 8px 14px 0 rgba(0, 0, 0, 0.2);
                position: absolute;
                display: flex;
                flex-direction: column;
                justify-content: center;
                width: 100%;
                height: 100%;
                -webkit-backface-visibility: hidden;
                backface-visibility: hidden;
                border: 2px solid #2CDD3D; /* Blue border */
                border-radius: 10px; /* Rounded corners */
            }

            .flip-card-front {
                background-color: #f8f9fa; /* Light gray background */
                color: #343a40; /* Dark text color */
            }

            .flip-card-back {
                background-color: #343a40; /* Dark background */
                color: #f8f9fa; /* Light text color */
                transform: rotateY(180deg);
            }

            nav {
                display: flex;
                justify-content: center;
            }

            .paginassion {
                display: inline-block;
                border-radius: 5px;
            }

            .paginassion a {
                color: black;
                float: left;
                padding: 8px 16px;
                text-decoration: none;
                border-radius: 5px;
                transition: background-color .3s;
                border: 1px solid #2CDD3D; /* Gray */
                margin: 0 4px; /* 0 is for top and bottom. Feel free to change it */
                font-size: 22px;
                text-align: center;
                box-shadow: 0 8px 14px 0 rgba(0, 0, 0, 0.2);
            }

            .paginassion a.active {
                background-color: #4CAF50;
                color: white;
                border-radius: 5px;
            }

            .paginassion a:hover:not(.active) {background-color: #2CDD3D;}

            .paginassion a:first-child {
                border-top-left-radius: 5px;
                border-bottom-left-radius: 5px;
            }

            .paginassion a:last-child {
                border-top-right-radius: 5px;
                border-bottom-right-radius: 5px;
            }


        </style>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $(document).ready(function() {
                // Function to trigger search as the user types
                $('#searchInput').on('input', function() {
                    var query = $(this).val(); // Get the search query from the input field
                    // Make an AJAX request to fetch search results based on the query
                    $.ajax({
                        url: 'TournoisController.php', // Assuming your PHP script handling the search is named search.php
                        method: 'GET',
                        data: {query: query}, // Pass the search query as a parameter
                        success: function(response) {
                            $('#searchResults').html(response); // Display the search results
                        }
                    });
                });
            });
        </script>

        <nav aria-label="pagination">
            <ul class="paginassion">
                <li>{{ knp_pagination_render(tournois) }}</li>
            </ul>
        </nav>



    {% endblock %}