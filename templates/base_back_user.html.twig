<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			{% block title %}Modernize Free
			{% endblock %}
		</title>
		<link rel="shortcut icon" type="image/png" href="assets/images/logos/favicon.png"/>
		<link rel="stylesheet" href="assets/css/styles.min.css"/>
	</head>
	<body>
		<div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed" data-header-position="fixed">
			<aside class="left-sidebar">
				<div>
					<div class="brand-logo d-flex align-items-center justify-content-between">
						<a class="text-nowrap logo-img">
							<img src="../assets/images/logos/dark-logo.svg" width="180" alt=""/>
						</a>
						<div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
							<i class="ti ti-x fs-8"></i>
						</div>
					</div>
					<nav class="sidebar-nav scroll-sidebar" data-simplebar="">
						<ul id="sidebarnav">
							<li class="nav-small-cap">
								<i class="ti ti-dots nav-small-cap-icon fs-4"></i>
								<span class="hide-menu">Home</span>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link" aria-expanded="false">
									<span>
										<i class="ti ti-layout-dashboard"></i>
									</span>
									<span class="hide-menu">Dashboard</span>
								</a>
							</li>
						</ul>
					</nav>
				</div>
			</aside>
			<header class="app-header">
				<nav class="navbar navbar-expand-lg navbar-light">
					<ul class="navbar-nav">
						<li class="nav-item d-block d-xl-none">
							<a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
								<i class="ti ti-menu-2"></i>
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link nav-icon-hover" href="javascript:void(0)">
								<i class="ti ti-bell-ringing"></i>
								<div class="notification bg-primary rounded-circle"></div>
							</a>
						</li>
					</ul>
					<div class="navbar-collapse justify-content-end px-0" id="navbarNav">
						<ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
							<li class="nav-item dropdown">
								<a class="nav-link nav-icon-hover" href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown" aria-expanded="false">
									<img src="../assets/images/profile/user-1.jpg" alt="" width="35" height="35" class="rounded-circle">
								</a>
								<div class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up" aria-labelledby="drop2">
									<div class="message-body">
										<a href="{{ path('app_logout') }}" class="btn btn-outline-primary mx-3 mt-2 d-block">Logout</a>
									</div>
								</div>

							</li>
						</ul>
					</div>
				</nav>
			</header>
			<div class="body-wrapper">
				<div class="container-fluid">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title fw-semibold mb-4"></h5>
							{% block content %}
								<h1>User index</h1>

								<form action="{{ path('app_user_index') }}" method="GET">
									<div class="input-group mb-3">
										<input type="text" class="form-control" name="search" placeholder="Search by username, email, or role">
										<div class="input-group-append">
											<button class="btn btn-outline-secondary" type="submit">Search</button>
										</div>
									</div>
								</form>

								<table
									class="table">
									<!-- Table headers -->
									<thead>
										<!-- Header row -->
										<tr class="table-warning">
											<th>Id</th>
											<th>Email</th>
											<th>Username</th>
											<th>Role</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody>
										<!-- User data rows -->
										{% for user in pagination %}
											<tr class="table-light">
												<td>{{ user.id }}</td>
												<td>{{ user.email }}</td>
												<td>{{ user.username }}</td>
												<td>{{ user.role }}</td>
												<td>
													{% if user.isBanned %}
														<form action="{{ path('app_user_unban', {'id': user.id}) }}" method="post" style="display: inline;">
															<input type="hidden" name="_token" value="{{ csrf_token('unban' ~ user.id) }}">
															<button type="submit" class="btn btn-warning btn-sm">Unban</button>
														</form>
													{% else %}
														<form action="{{ path('app_user_ban', {'id': user.id}) }}" method="post" style="display: inline;">
															<input type="hidden" name="_token" value="{{ csrf_token('ban' ~ user.id) }}">
															<button type="submit" class="btn btn-danger btn-sm">Ban</button>
														</form>
													{% endif %}
													<a href="{{ path('app_user_show', {'id': user.id}) }}" class="btn btn-primary btn-sm">Show</a>
												</td>
											</tr>
										{% else %}
											<!-- If no users found -->
											<tr>
												<td colspan="5">No records found</td>
											</tr>
										{% endfor %}
									</tbody>
								</table>

								<!-- Pagination controls -->
								<nav aria-label="Page navigation">
									<ul class="pagination justify-content-center">
										{% if pagination.currentPageNumber != 1 %}
											<li class="page-item">
												<a class="page-link" href="{{ path('app_user_index', {'page': 1}) }}" aria-label="First">
													<span aria-hidden="true">&laquo;&laquo;</span>
													<span class="sr-only">First</span>
												</a>
											</li>
											<li class="page-item">
												<a class="page-link" href="{{ path('app_user_index', {'page': pagination.currentPageNumber - 1}) }}" aria-label="Previous">
													<span aria-hidden="true">&laquo;</span>
													<span class="sr-only">Previous</span>
												</a>
											</li>
										{% endif %}
										{% for page in 1..pagination.pageCount %}
											<li class="page-item {% if page == pagination.currentPageNumber %}active{% endif %}">
												<a class="page-link" href="{{ path('app_user_index', {'page': page}) }}">{{ page }}</a>
											</li>
										{% endfor %}
										{% if pagination.currentPageNumber != pagination.pageCount %}
											<li class="page-item">
												<a class="page-link" href="{{ path('app_user_index', {'page': pagination.currentPageNumber + 1}) }}" aria-label="Next">
													<span aria-hidden="true">&raquo;</span>
													<span class="sr-only">Next</span>
												</a>
											</li>
											<li class="page-item">
												<a class="page-link" href="{{ path('app_user_index', {'page': pagination.pageCount}) }}" aria-label="Last">
													<span aria-hidden="true">&raquo;&raquo;</span>
													<span class="sr-only">Last</span>
												</a>
											</li>
										{% endif %}
									</ul>
								</nav>
							{% endblock %}
						</div>
					</div>
				</div>
			</div>


		</div>
		<script src="../assets/libs/jquery/dist/jquery.min.js"></script>
		<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
		<script src="../assets/js/sidebarmenu.js"></script>
		<script src="../assets/js/app.min.js"></script>
		<script src="../assets/libs/simplebar/dist/simplebar.js"></script>
	</body>
</html>
